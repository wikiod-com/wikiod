---
title: "The Flash Scope in JSF 2"
slug: "the-flash-scope-in-jsf-2"
draft: false
images: []
weight: 9911
type: docs
toc: true
---

The Flash concept is taken from Ruby on Rails and provides a way to pass temporary objects between the user views generated by the faces lifecycle. As in Rails, anything one places in the flash will be exposed to the next view encountered by the same user session and then cleared out. It is important to note that “next view” may have the same view id as the previous view.

The JSF implementation must ensure the proper behaviour of the flash is preserved even in the case of a `<navigation-case>` that contains a `<redirect />`. The implementation must ensure the proper behavior of the flash is preserved even in the case of adjacent GET requests on the same session. This allows Faces applications to fully utilize the “Post/Redirect/Get” design pattern.

## Demonstration of the Flash Scope usage
**Bean1**

    @ManagedBean
    @ViewScoped
    public class Bean1 implements Serializable {
    
        /**
         * Just takes the given param, sets it into flash context and redirects to
         * page2
         * 
         * @param inputValue
         * @return
         */
        public String goPage2(String inputValue) {
            FacesContext.getCurrentInstance().getExternalContext().getFlash()
                    .put("param", inputValue);
            return "page2?faces-redirect=true";
        }
    
    }

**page1.xhtml**

<!-- language: lang-xhtml -->

    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head />
    <h:body>
    
        <!-- Sets the first flash param at the action method -->
        <h:form>
            <h:inputText value="#{inputValue}" />
            <h:commandButton action="#{bean1.goPage2(inputValue)}"
                value="Go Page 2" />
        </h:form>
    
        <!-- Sets the second flash param -->
        <c:set target="#{flash}" property="param2" value="Myparam2" />
    
        <!-- Tries to retrieve both of the params. 
        Note none of them is displayed at the first page hit.
        If page refreshed, the second param which has been already set, will be displayed -->
        <p>Param1: #{flash['param']}</p>
        <p>Param2: #{flash['param2']}</p>
    </h:body>
    </html>

**Bean2**

    @ManagedBean
    @ViewScoped
    public class Bean2 implements Serializable {
    
        public String getParam() {
            /**
             * Takes the parameter from the flash context
             */
            return (String) FacesContext.getCurrentInstance().getExternalContext()
                    .getFlash().get("param");
        }
    
    }

**page2.xhtml**

<!-- language: lang-xhtml -->

    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core">
    <h:head />
    <!-- This page just displays the received params -->
    <h:body>
        <!-- Different ways to retrieve the params from the flash scope -->
        <p>Param1: #{bean2.param}</p>
        <p>Param1: #{flash.param}</p>
        <p>Param1: #{flash['param']}</p>
        <p>Param2: #{flash['param2']}</p>
        
        <!-- Keep the first param for next redirection -->
        #{flash.keep.param}
    
        <!-- Return to page1 and see how the first param is retained -->
        <h:button outcome="page1?faces-redirect=true" value="return to 1" />
    </h:body>
    </html>

