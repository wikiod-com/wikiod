---
title: "Aggregations"
slug: "aggregations"
draft: false
images: []
weight: 9995
type: docs
toc: true
---

## Syntax
- "aggregations" : {
 -"<aggregation_name>" : {
  -"<aggregation_type>" : {
   -<aggregation_body>
    -}
     -[,"meta" : {  [<meta_data_body>] } ]?
      -[,"aggregations" : { [<sub_aggregation>]+ } ]?
       -}
        -[,"<aggregation_name_2>" : { ... } ]*
    -}

## Avg aggregation
This is a single value metrics aggregation that calculates the average of the numeric values that are extracted from the aggregated documents.

    POST /index/_search?
    {
        "aggs" : {
            "avd_value" : { "avg" : { "field" : "name_of_field" } }
        }
    }

The above aggregation computes the average grade over all documents. The aggregation type is avg and the field setting defines the numeric field of the documents the average will be computed on. The above will return the following:

    {
        ...
        "aggregations": {
            "avg_value": {
                "value": 75.0
            }
        }
    }

The name of the aggregation (avg_grade above) also serves as the key by which the aggregation result can be retrieved from the returned response.

## Cardinality Aggregation
A single-value metrics aggregation that calculates an approximate count of distinct values. Values can be extracted either from specific fields in the document or generated by a script.

    POST /index/_search?size=0
    {
        "aggs" : {
            "type_count" : {
                "cardinality" : {
                    "field" : "type"
                }
            }
        }
    }

Response:

    {
        ...
        "aggregations" : {
            "type_count" : {
                "value" : 3
            }
        }
    }

## Extended Stats Aggregation
A multi-value metrics aggregation that computes stats over numeric values extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.

The extended_stats aggregations is an extended version of the stats aggregation, where additional metrics are added such as sum_of_squares, variance, std_deviation and std_deviation_bounds.

    {
        "aggs" : {
            "stats_values" : { "extended_stats" : { "field" : "field_name" } }
        }
    }

Sample output:

    {
        ...
    
        "aggregations": {
            "stats_values": {
               "count": 9,
               "min": 72,
               "max": 99,
               "avg": 86,
               "sum": 774,
               "sum_of_squares": 67028,
               "variance": 51.55555555555556,
               "std_deviation": 7.180219742846005,
               "std_deviation_bounds": {
                "upper": 100.36043948569201,
                "lower": 71.63956051430799
               }
            }
        }
    }

